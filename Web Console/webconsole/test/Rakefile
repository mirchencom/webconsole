require 'shellwords'

task :default => ['webconsole:tests']

namespace :webconsole do
  webconsole_gem_tests_directory = File.expand_path(File.dirname(__FILE__))
  
  task :tests => [:clean_up]

  task :test_webconsole do
    webconsole_gem_tests_file = File.join(webconsole_gem_tests_directory, "tc_webconsole.rb")
    ruby Shellwords.escape(webconsole_gem_tests_file)
  end

  task :clean_up => [:test_webconsole] do
    data_directory = File.join(webconsole_gem_tests_directory, "data")
    quit_applescript_file = File.join(data_directory, "quit.applescript")
    sh "osascript #{Shellwords.escape(quit_applescript_file)}"
  end

end